<!DOCTYPE HTML>
<html>
  <head>
    <title>Blog - Sou Kit-Wa (Ken)</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=1000">

    <link rel="stylesheet" href="css/style.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Asap:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">

    <style>
      @import url('https://fonts.googleapis.com/css2?family=Asap:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap');

      #header {
        padding-top: 6em;
        margin-bottom: 1.2em;
      }

      .page-title {
        font-size: 2.4em;
        line-height: 1.2em;
        font-weight: 600;
        margin-bottom: 0.4em;
      }

      .page-subtitle {
        color: #a0a8b0;
        line-height: 1.6em;
      }

      /* Blog list */
      .post-list {
        margin-top: 1.4em;
      }

      .post-card {
        margin-top: 1.2em;
        padding: 1.4em 1.6em;
        border-radius: 12px;
        border-left: 4px solid #146ebe;
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      }

      .post-meta {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 1em;
        margin-bottom: 0.7em;
        flex-wrap: wrap;
      }

      .post-date {
        color: #a0a8b0;
        font-size: 0.95em;
      }

      .post-tags {
        display: flex;
        align-items: center;
        gap: 0.5em;
        flex-wrap: wrap;
      }

      .tag {
        display: inline-flex;
        align-items: center;
        gap: 0.35em;
        font-size: 0.9em;
        font-weight: 600;
        padding: 0.18em 0.65em;
        border-radius: 999px;
        border: 1px solid rgba(20, 110, 190, 0.25);
        background: rgba(20, 110, 190, 0.10);
        color: #0d4a8a;
      }

      .tag-dex {
        border-color: rgba(123, 31, 162, 0.25);
        background: rgba(123, 31, 162, 0.10);
        color: #5c1a78;
      }

      .tag-notes {
        border-color: rgba(46, 125, 50, 0.25);
        background: rgba(46, 125, 50, 0.10);
        color: #1b5e20;
      }

      .tag-mode {
        border-color: rgba(2, 119, 189, 0.25);
        background: rgba(2, 119, 189, 0.10);
        color: #01579b;
      }

      .tag-ac {
        border-color: rgba(230, 81, 0, 0.25);
        background: rgba(230, 81, 0, 0.10);
        color: #e65100;
      }

      .post-title {
        font-size: 1.25em;
        margin-bottom: 0.45em;
        line-height: 1.35em;
        color: #150c21;
      }

      .post-excerpt {
        color: #495057;
        line-height: 1.7em;
      }

      .post-actions {
        margin-top: 0.9em;
        display: flex;
        align-items: center;
        gap: 0.9em;
        flex-wrap: wrap;
      }

      .post-read {
        display: inline-block;
        font-weight: 600;
        color: #146ebe;
      }

      .post-read:hover {
        border-bottom: 1px solid rgb(20, 110, 190);
      }

      .back-link {
        display: inline-block;
        margin-top: 1.2em;
        color: #146ebe;
        font-size: 1.05em;
      }

      body.dark-theme .post-card {
        background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
        border-left-color: #4a9eff;
      }

      body.dark-theme .post-title { color: #ffffff; }
      body.dark-theme .post-excerpt { color: #e2e8f0; }
      body.dark-theme .page-subtitle,
      body.dark-theme .post-date { color: #b0b0b0; }

      body.dark-theme .tag {
        border-color: rgba(74, 158, 255, 0.35);
        background: rgba(74, 158, 255, 0.12);
        color: #bfe0ff;
      }

      body.dark-theme .tag-dex {
        border-color: rgba(190, 120, 255, 0.35);
        background: rgba(190, 120, 255, 0.12);
        color: #e6ccff;
      }

      body.dark-theme .tag-notes {
        border-color: rgba(129, 199, 132, 0.35);
        background: rgba(129, 199, 132, 0.12);
        color: #d5f5d6;
      }

      body.dark-theme .tag-mode {
        border-color: rgba(79, 195, 247, 0.35);
        background: rgba(79, 195, 247, 0.12);
        color: #c8f1ff;
      }

      body.dark-theme .tag-ac {
        border-color: rgba(255, 183, 77, 0.40);
        background: rgba(255, 183, 77, 0.14);
        color: #ffe0b2;
      }

      body.dark-theme .post-read {
        color: #4a9eff;
      }

      /* Search & filter */
      .search-panel {
        margin-top: 1.2em;
        padding: 1.2em 1.4em;
        border-radius: 14px;
        border: 1px solid rgba(17, 24, 39, 0.10);
        background: rgba(255, 255, 255, 0.85);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
      }

      .search-row {
        display: flex;
        gap: 0.8em;
        flex-wrap: wrap;
        align-items: center;
      }

      .search-input {
        flex: 1 1 320px;
        padding: 0.75em 0.9em;
        border-radius: 10px;
        border: 1px solid rgba(17, 24, 39, 0.14);
        font-family: inherit;
        font-size: 1em;
        background: rgba(255,255,255,0.9);
      }

      .search-select {
        flex: 0 0 auto;
        padding: 0.72em 0.9em;
        border-radius: 10px;
        border: 1px solid rgba(17, 24, 39, 0.14);
        font-family: inherit;
        font-size: 1em;
        background: rgba(255,255,255,0.9);
      }

      .search-btn {
        flex: 0 0 auto;
        padding: 0.72em 1.0em;
        border-radius: 10px;
        border: 2px solid #146ebe;
        background: #146ebe;
        color: #fff;
        font-weight: 700;
        cursor: pointer;
      }

      .search-btn.secondary {
        background: transparent;
        color: #146ebe;
      }

      .search-meta {
        margin-top: 0.9em;
        display: flex;
        gap: 0.8em;
        align-items: center;
        flex-wrap: wrap;
        color: #6b7280;
        font-size: 0.95em;
      }

      .tag-filter {
        margin-top: 0.9em;
        display: flex;
        gap: 0.5em;
        flex-wrap: wrap;
      }

      .tag-filter .tag {
        cursor: pointer;
        user-select: none;
      }

      .tag.is-active {
        border-color: rgba(20, 110, 190, 0.45);
        background: rgba(20, 110, 190, 0.18);
      }

      body.dark-theme .search-panel {
        background: rgba(17, 24, 39, 0.45);
        border-color: rgba(148, 163, 184, 0.18);
      }

      body.dark-theme .search-input,
      body.dark-theme .search-select {
        background: rgba(17, 24, 39, 0.55);
        border-color: rgba(148, 163, 184, 0.25);
        color: #e5e7eb;
      }

      body.dark-theme .search-meta { color: #cbd5e1; }
      body.dark-theme .search-btn.secondary { color: #4a9eff; border-color: #4a9eff; }
      body.dark-theme .search-btn { background: #4a9eff; border-color: #4a9eff; }
    </style>
  </head>

  <body id="body">
    <div id="main">
      <div id="header">
        <div class="page-title">Blog</div>
        <div class="page-subtitle">
          A lightweight space for publishing my ideas. Add a new HTML page, then add a new post card below.
        </div>
        <div class="search-panel" aria-label="Blog search and filters">
          <div class="search-row">
            <input id="blog-search" class="search-input" type="text" placeholder="Search title, excerpt, tags‚Ä¶" />
            <select id="blog-sort" class="search-select" aria-label="Sort posts">
              <option value="desc" selected>Newest first</option>
              <option value="asc">Oldest first</option>
            </select>
            <button id="blog-clear" class="search-btn secondary" type="button">Clear</button>
          </div>
          <div class="search-meta">
            <div id="blog-result-count">Showing all posts.</div>
            <div id="blog-active-filter" style="display:none;"></div>
          </div>
          <div id="blog-tag-filter" class="tag-filter" aria-label="Tag filters"></div>
        </div>
        <a class="back-link" href="index.html">‚Üê Back to Home</a>
      </div>

      <div class="post-list">
        <!-- Posts: duplicate an <article class="post-card"> block below to add a new entry -->

        <article class="post-card">
          <div class="post-meta">
            <time class="post-date" datetime="2026-01-13">2026-01-13</time>
            <div class="post-tags">
              <span class="tag tag-dex">Dex</span>
            </div>
          </div>
          <h3 class="post-title">
            <a href="dexhand-sensing.html">ü§ñ DexHand Sensing System</a>
          </h3>
          <p class="post-excerpt">
            Sensor stack, multi-rate loops, time sync, calibration, and a learning-ready data schema for dexterous hands.
          </p>
          <div class="post-actions">
            <a class="post-read" href="dexhand-sensing.html">Read ‚Üí</a>
          </div>
        </article>

        <article class="post-card">
          <div class="post-meta">
            <time class="post-date" datetime="2026-01-13">2026-01-13</time>
            <div class="post-tags">
              <span class="tag tag-dex">Dex</span>
              <span class="tag tag-mode">Deploy/Research</span>
              <span class="tag tag-ac">A+C</span>
            </div>
          </div>
          <h3 class="post-title">
            <a href="dexhand-sensing-system-design.html">üß© DexHand Sensing System Design (Deployment √ó Data √ó Self-Recovery)</a>
          </h3>
          <p class="post-excerpt">
            A deployable sensing design for dexterous hands: multi-rate loops + time sync + two-mode data (Deploy vs Research),
            using A (Teacher‚ÜíStudent distillation) + C (RM/QC flywheel) to get stable deployment and high-resolution research value.
          </p>
          <div class="post-actions">
            <a class="post-read" href="dexhand-sensing-system-design.html">Read ‚Üí</a>
            <a class="post-read" href="dexhand-sensing.html">Related: Concept Note ‚Üí</a>
          </div>
        </article>

        <article class="post-card">
          <div class="post-meta">
            <time class="post-date" datetime="2026-01-13">2026-01-13</time>
            <div class="post-tags">
              <span class="tag tag-notes">Notes</span>
            </div>
          </div>
          <h3 class="post-title">
            <a href="thinking.html">üß† Thinking Board</a>
          </h3>
          <p class="post-excerpt">
            A simple local board for collecting thoughts; great for drafts before turning them into publishable posts.
            (Notes are stored in your browser‚Äôs local storage.)
          </p>
          <div class="post-actions">
            <a class="post-read" href="thinking.html">Open ‚Üí</a>
          </div>
        </article>

        <article class="post-card">
          <div class="post-meta">
            <time class="post-date" datetime="2026-01-25">2026-01-25</time>
            <div class="post-tags">
              <span class="tag tag-dex">Dex</span>
              <span class="tag tag-mode">Deploy/Research</span>
            </div>
          </div>
          <h3 class="post-title">
            <a href="climbing_friction_to_dexhand_sensing.html">üßó Friction Margin: From Climbing to DexHands</a>
          </h3>
          <p class="post-excerpt">
            Climbing is mostly ‚Äúestimate friction margin under uncertainty‚Äù. This post borrows the friction-cone / pre-slip mindset
            to design tactile sensing and control loops for dexterous hands.
          </p>
          <div class="post-actions">
            <a class="post-read" href="climbing_friction_to_dexhand_sensing.html">Read ‚Üí</a>
          </div>
        </article>
      </div>

      <div id="footer" style="display:flex; justify-content:flex-start; align-items:center; gap: 1em; flex-wrap: wrap; padding: 1em 0;">
        <div>
          &copy; 2025 Sou Kit-Wa (Ken). All rights reserved.
        </div>
      </div>
    </div>
    <script>
      function parseDate(card) {
        const t = card.querySelector('time.post-date');
        const raw = (t && (t.getAttribute('datetime') || t.textContent)) || '';
        const d = new Date(raw);
        return isNaN(d.getTime()) ? new Date(0) : d;
      }

      function getTags(card) {
        return Array.from(card.querySelectorAll('.post-tags .tag'))
          .map(el => (el.textContent || '').trim())
          .filter(Boolean);
      }

      function getHaystack(card) {
        const title = (card.querySelector('.post-title')?.textContent || '').trim();
        const excerpt = (card.querySelector('.post-excerpt')?.textContent || '').trim();
        const tags = getTags(card).join(' ');
        return (title + ' ' + excerpt + ' ' + tags).toLowerCase();
      }

      function setActiveTag(el, active) {
        if (!el) return;
        if (active) el.classList.add('is-active');
        else el.classList.remove('is-active');
      }

      function initBlogSearch() {
        const list = document.querySelector('.post-list');
        const cards = Array.from(document.querySelectorAll('.post-card'));
        const searchEl = document.getElementById('blog-search');
        const sortEl = document.getElementById('blog-sort');
        const clearEl = document.getElementById('blog-clear');
        const countEl = document.getElementById('blog-result-count');
        const activeEl = document.getElementById('blog-active-filter');
        const tagWrap = document.getElementById('blog-tag-filter');

        if (!list || cards.length === 0) return;

        // Build tag index
        const tagSet = new Set();
        for (const c of cards) for (const t of getTags(c)) tagSet.add(t);
        const tags = Array.from(tagSet).sort((a, b) => a.localeCompare(b));

        // Render tag filters
        const tagButtons = new Map();
        tagWrap.innerHTML = '';
        for (const t of tags) {
          const span = document.createElement('span');
          span.className = 'tag';
          span.textContent = t;
          span.setAttribute('role', 'button');
          span.setAttribute('tabindex', '0');
          tagWrap.appendChild(span);
          tagButtons.set(t, span);
        }

        let activeTag = null;

        function applySort() {
          const dir = (sortEl && sortEl.value) || 'desc';
          const sorted = cards.slice().sort((a, b) => {
            const da = parseDate(a).getTime();
            const db = parseDate(b).getTime();
            return dir === 'asc' ? da - db : db - da;
          });
          for (const c of sorted) list.appendChild(c);
        }

        function applyFilter() {
          const q = (searchEl && searchEl.value ? searchEl.value.trim().toLowerCase() : '');
          let shown = 0;

          for (const c of cards) {
            const tagsOfCard = getTags(c);
            const matchTag = !activeTag || tagsOfCard.includes(activeTag);
            const matchQ = !q || getHaystack(c).includes(q);
            const ok = matchTag && matchQ;
            c.style.display = ok ? '' : 'none';
            if (ok) shown += 1;
          }

          const total = cards.length;
          if (shown === total && !q && !activeTag) {
            countEl.textContent = 'Showing all posts.';
          } else {
            countEl.textContent = `Showing ${shown} of ${total} posts.`;
          }

          if (activeTag) {
            activeEl.style.display = '';
            activeEl.textContent = `Filter: tag = ${activeTag}${q ? `; search = "${q}"` : ''}`;
          } else if (q) {
            activeEl.style.display = '';
            activeEl.textContent = `Filter: search = "${q}"`;
          } else {
            activeEl.style.display = 'none';
            activeEl.textContent = '';
          }
        }

        function setTag(t) {
          // toggle
          const next = (activeTag === t) ? null : t;
          if (activeTag && tagButtons.get(activeTag)) setActiveTag(tagButtons.get(activeTag), false);
          activeTag = next;
          if (activeTag && tagButtons.get(activeTag)) setActiveTag(tagButtons.get(activeTag), true);
          applyFilter();
        }

        function clearAll() {
          if (searchEl) searchEl.value = '';
          if (activeTag && tagButtons.get(activeTag)) setActiveTag(tagButtons.get(activeTag), false);
          activeTag = null;
          if (sortEl) sortEl.value = 'desc';
          applySort();
          applyFilter();
        }

        // Wire events
        if (searchEl) searchEl.addEventListener('input', applyFilter);
        if (sortEl) sortEl.addEventListener('change', () => { applySort(); applyFilter(); });
        if (clearEl) clearEl.addEventListener('click', clearAll);

        for (const [t, el] of tagButtons.entries()) {
          el.addEventListener('click', () => setTag(t));
          el.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              setTag(t);
            }
          });
        }

        // Default: newest first
        applySort();
        applyFilter();
      }

      document.addEventListener('DOMContentLoaded', initBlogSearch);
    </script>
  </body>
</html>

